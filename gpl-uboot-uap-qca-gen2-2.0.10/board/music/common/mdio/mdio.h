#ifndef _MDIO_H_
#define _MDIO_H_

#include <config.h>
#include <common.h>
#include <malloc.h>
#include <net.h>
#include <command.h>
#include <asm/io.h>
#include <asm/addrspace.h>
#include <asm/types.h>
#include <music_soc.h>

#define MDIOM_REG_BASE 0x180a0000


/*REGISTER DEFINE*/
#define REG_MDIOM_DATA 0x00000000

#define REG_MDIOM_ADDR 0x00000004

#define REG_MDIOM_REGAD 0x00000008
#define MDIOM_REGAD_VAL_MASK 0xffffffff

#define REG_MDIOM_PHYAD 0x0000000c
#define MDIOM_PHYAD_VAL_MASK 0x0000001f

#define REG_MDIOM_ST_OP 0x00000010
#define MDIOM_ST_OP_RD_MASK 0x00000030
#define MDIOM_ST_OP_WR_MASK 0x0000000C
#define MDIOM_ST_OP_ST_MASK 0x00000003

#define REG_MDIOM_CTRL 0x00000014
#define MDIOM_CTRL_SUP_PRE_MASK   0x00020000
#define MDIOM_CTRL_SUP_PRE_SHIFT  17
#define MDIOM_CTRL_SIG_MODE_MASK  0x00010000
#define MDIOM_CTRL_SIG_MODE_SHIFT 16
#define MDIOM_CTRL_DEV_SEL_SWITCH 0x00000008
#define MDIOM_CTRL_RD_START_MASK  0x00000004
#define MDIOM_CTRL_WR_START_MASK  0x00000002
#define MDIOM_CTRL_ENABLE_MASK    0x00000001

#define REG_MDIOM_CLK_DIVIDER 0x00000018
#define MDIOM_CLK_DIVIDER_VAL_MASK 0x000000ff

#define REG_MDIOM_INT_STATUS 0x0000001c
#define MDIOM_INT_STATUS_ERROR_MASK   0x00000004
#define MDIOM_INT_STATUS_RD_DONE_MASK 0x00000002
#define MDIOM_INT_STATUS_WR_DONE_MASK 0x00000001

#define REG_MDIOM_INT_MASK 0x00000020
#define MDIOM_INT_MASK_ERROR_MASK   0x00000004
#define MDIOM_INT_MASK_RD_DONE_MASK 0x00000002
#define MDIOM_INT_MASK_WR_DONE_MASK 0x00000001

#define REG_MDIOM_STATUS 0x00000024
#define MDIOM_STATUS_BUSY_MASK 0x00000001

#define MUSIC_MDIOM_ENHANCE_MODE 0
#define MUSIC_MDIOM_SINGLE_MODE  1
#define MUSIC_MDIOM_NO_SUPPRESS_PREAMBLE 0
#define MUSIC_MDIOM_SUPPRESS_PREAMBLE    1
#define MUSIC_MDIOM_DEV_SEL_SOC    0
#define MUSIC_MDIOM_DEV_SEL_SWITCH 1

#define MDIOM_READ_REG(reg)  music_reg_rd((MDIOM_REG_BASE+(reg)))
#define MDIOM_WRITE_REG(reg, val) music_reg_wr((MDIOM_REG_BASE+(reg)), (val))

/*0x1880_0000~0x18FF_FFFF*/
#define MUSIC_REG_IS_SWITCH(reg) (((reg) > 0x18800000) && ((reg) < 0x18FFFFFF))

#endif /*_MDIO_H_*/
